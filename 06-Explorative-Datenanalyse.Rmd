# Explorative-Datenanalyse

*Der Beitrag wurde das letzte mal am `r format(Sys.time(), '%d %B, %Y')` editiert*

```{r include=FALSE}

knitr::opts_chunk$set(fig.align = "center", collapse = T, echo = TRUE, message = FALSE, warning = FALSE)

# With collapse = TRUE the Source and output lived together happily ever in knitr.
# https://github.com/yihui/knitr-examples/blob/master/039-merge.md

# loading multiple packages at once with `pacman`
# create a vector name
packages <- c("tidyverse", "markdown", "knitr", "matrixStats", "patchwork", "lubridate", "plotly",  "naniar", "stlplus", "gt", "dygraphs", "htmltools", "zoo", "xts", "ggpmisc", "forcats", "RColorBrewer", "Kendall", "rstudioapi", "multcompView", "plyr", "bookdown", "janitor", "rstatix", "ggpubr", "moments")
 
# Load the packages vector 
pacman::p_load(packages, character.only = T)

my_theme <- theme(
  panel.background = element_rect(fill = "white", color = "black"),
  panel.grid.major = element_blank(), 
  panel.grid.minor = element_blank(), 
  panel.border = element_blank())

```

```{r echo = F}
# Daten Speicherkoog einlesen
koog_day <- readr::read_csv("data/data_daily.csv")
koog_year <- readr::read_csv("data/data_year.csv")
```

Bevor wir uns an das vermeintlich schÃ¶nste Thema reinstÃ¼rzen - der Datenvisualisierung - gehen wir in diesem Kapitel auf die explorative Datenanalyse (EDA) ein. 

ðŸ” Besser als in [r4ds](https://r4ds.had.co.nz/exploratory-data-analysis.html) lÃ¤sst es sich eigentlich nicht zusammenfassen

EDA ist kein strikt vorwÃ¤rtsgerichteter Prozess mit bestimmten Regeln. Vielmehr geht es darum mit dem Datensatz zu spielen, Ideen zu erkunden, diese fÃ¼r gut oder schlecht zu befinden, um die vielversprechendsten AnsÃ¤tze dem Publikum nÃ¤her zu bringen. Was man hierbei nicht vergessen darf ist auch die ÃœberprÃ¼fung der *DatenqualitÃ¤t*, bspw. ob die Daten mit derselben Methoden erhoben wurden, bezieht man sich auf dieselben Einheiten und gibt es Fehlwerte (`NA`s), die eine Analyse des Datensatzes in ein zweifelhaftes Licht rÃ¼cken. 

> â€œThere are no routine statistical questions, only questionable statistical routines.â€ â€” Sir David Cox

> â€œFar better an approximate answer to the right question, which is often vague, than an exact answer to the wrong question, which can always be made precise.â€ â€” John Tukey

Zentrales Ziel der EDA ist es, ein VerstÃ¤ndnis fÃ¼r die Daten zu erlangen auf einem mÃ¶glichst kreativen Weg. 

## Fehlende Werte

Elektroden und GerÃ¤tschaften im GelÃ¤nde sind wie Menschen - sie wollen gut gepflegt werden aber auch bei bester Pflege machen sie nicht immer das was sie tun sollen. Starten wir also damit zu erkunden, wieviele Fehlwerte wir in unserem Speicherkoog Datensatz haben. Der erste Weg wÃ¤re zu erkunden, ob Ã¼berhaupt `NA`s in unserem Datensatz auftreten:

```{r}
# Tritt ein NA in unserem Vektor auf
any_na(koog_day$st10)
```

Es befinden sich also Fehlwerte in st10. 

```{r}
# Mit are_na bekommen wir einen Vektor mit TRUE und FALSE Ã¼ber NA Werte angezeigt
are_na(koog_day$st10) %>%
  head(n = 10)
```

Wir kÃ¶nnen uns auch eine Prozentzahl angeben lassen, indem wir die Anzahl der NA Werte in unserem Vektor durch die LÃ¤nge des Vektors teilen:

```{r}
n_miss(koog_day$st10) / nrow(koog_day) * 100
```
Es fehlen also 2.2% Der Daten. Das ist erstmal nicht viel. Mithilfe des `vis_dat` packages kann man schnell und leicht Ã¼berprÃ¼fen wie die zeitliche Verteilung der Werte ist. Es spielt schlieÃŸlich schon eine Rolle, ob ich jeden Tag einen systematischen Fehlwert habe oder die Fehlwerte en block wÃ¤hrend einer bestimmten Periode auftreten. 

```{r}
koog_day %>%
  select(st10) %>%
  visdat::vis_miss()
```

Wir sehen also, dass 2,2% des Datensatzes keine Werte enthalten und fÃ¼r nur kurze Perioden auftreten. FÃ¼r die elektrische LeitfÃ¤higkeit `ec` ist dies leider nicht der Fall. Speziell zu Beginn der Untersuchung gab es immer wieder AusfÃ¤lle. Diese Werte sind also im Allgemeinen mit Vorsicht zu bewerten. 

```{r}
koog_day %>%
  select(ec) %>%
  visdat::vis_miss()
```

Tabellarisch kann man sich die Daten natÃ¼rlich auch angeben lassen:

```{r}
koog_day %>%
  select(!contains("oxy")) %>%
  miss_var_summary(order = T) %>%
  head(n = 5)
```
