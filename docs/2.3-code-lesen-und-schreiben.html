<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="2.3 Code lesen und schreiben | Daten Analyse mit RStudio - Dokumentation" />
<meta property="og:type" content="book" />


<meta property="og:description" content="Explorative Datenanalyse in den Geowissenschaften" />


<meta name="author" content="Dr. Kristof Dorau" />



<meta name="description" content="Explorative Datenanalyse in den Geowissenschaften">

<title>2.3 Code lesen und schreiben | Daten Analyse mit RStudio - Dokumentation</title>

<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="libs/navigation-1.1/tabsets.js"></script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>



<link rel="stylesheet" href="toc.css" type="text/css" />

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
/* show arrow before summary tag as in bootstrap
TODO: remove if boostrap in updated in html_document (rmarkdown#1485) */
details > summary {
  display: list-item;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container-fluid main-container">


<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul>
<li><a href="index.html#einleitung"><span class="toc-section-number">1</span> Einleitung</a>
<ul>
<li><a href="1.1-syntax-und-stilistische-mittel-der-dokumentation.html#syntax-und-stilistische-mittel-der-dokumentation"><span class="toc-section-number">1.1</span> Syntax und stilistische Mittel der Dokumentation</a></li>
<li><a href="1.2-falbeispiele.html#falbeispiele"><span class="toc-section-number">1.2</span> Falbeispiele</a>
<ul>
<li><a href="1.2-falbeispiele.html#speicherkoog"><span class="toc-section-number">1.2.1</span> Speicherkoog</a></li>
<li><a href="1.2-falbeispiele.html#mtcars-datensatz"><span class="toc-section-number">1.2.2</span> <code>mtcars</code> Datensatz</a></li>
</ul></li>
<li><a href="1.3-über-mich.html#über-mich"><span class="toc-section-number">1.3</span> Über mich</a></li>
<li><a href="1.4-literatur.html#literatur"><span class="toc-section-number">1.4</span> Literatur</a></li>
</ul></li>
<li><a href="2-erste-schritte-mit-r.html#erste-schritte-mit-r"><span class="toc-section-number">2</span> Erste Schritte mit R</a>
<ul>
<li><a href="2.1-installation.html#installation"><span class="toc-section-number">2.1</span> Installation</a>
<ul>
<li><a href="2.1-installation.html#r"><span class="toc-section-number">2.1.1</span> R</a></li>
<li><a href="2.1-installation.html#rstudio"><span class="toc-section-number">2.1.2</span> RStudio</a></li>
<li><a href="2.1-installation.html#packages---das-tidyverse"><span class="toc-section-number">2.1.3</span> Packages - das tidyverse</a></li>
</ul></li>
<li><a href="2.2-rstudio-benutzeroberfläche.html#rstudio-benutzeroberfläche"><span class="toc-section-number">2.2</span> RStudio Benutzeroberfläche</a>
<ul>
<li><a href="2.2-rstudio-benutzeroberfläche.html#source"><span class="toc-section-number">2.2.1</span> Source</a></li>
<li><a href="2.2-rstudio-benutzeroberfläche.html#konsole"><span class="toc-section-number">2.2.2</span> Konsole</a></li>
<li><a href="2.2-rstudio-benutzeroberfläche.html#environment"><span class="toc-section-number">2.2.3</span> Environment</a></li>
<li><a href="2.2-rstudio-benutzeroberfläche.html#files-plots-packages-help"><span class="toc-section-number">2.2.4</span> Files / Plots / Packages / Help</a></li>
</ul></li>
<li><a href="2.3-code-lesen-und-schreiben.html#code-lesen-und-schreiben"><span class="toc-section-number">2.3</span> Code lesen und schreiben</a>
<ul>
<li><a href="2.3-code-lesen-und-schreiben.html#die-konsole"><span class="toc-section-number">2.3.1</span> Die Konsole</a></li>
<li><a href="2.3-code-lesen-und-schreiben.html#r-skript"><span class="toc-section-number">2.3.2</span> R Skript</a></li>
<li><a href="2.3-code-lesen-und-schreiben.html#good-practice-code-zu-schreiben"><span class="toc-section-number">2.3.3</span> Good practice Code zu schreiben</a></li>
</ul></li>
<li><a href="2.4-objekte-und-funktionen.html#objekte-und-funktionen"><span class="toc-section-number">2.4</span> Objekte und Funktionen</a>
<ul>
<li><a href="2.4-objekte-und-funktionen.html#neue-objekte-erstellen"><span class="toc-section-number">2.4.1</span> Neue Objekte erstellen</a></li>
<li><a href="2.4-objekte-und-funktionen.html#beispiel-umrechnen-von-c-in-k"><span class="toc-section-number">2.4.2</span> Beispiel: Umrechnen von °C in K</a></li>
</ul></li>
<li><a href="2.5-cheatsheets.html#cheatsheets"><span class="toc-section-number">2.5</span> Cheatsheets</a></li>
</ul></li>
<li><a href="3-grundlagen.html#grundlagen"><span class="toc-section-number">3</span> Grundlagen</a>
<ul>
<li><a href="3.1-datentypen.html#datentypen"><span class="toc-section-number">3.1</span> Datentypen</a>
<ul>
<li><a href="3.1-datentypen.html#numerische-objekte"><span class="toc-section-number">3.1.1</span> Numerische Objekte</a></li>
<li><a href="3.1-datentypen.html#textobjekte"><span class="toc-section-number">3.1.2</span> Textobjekte</a></li>
<li><a href="3.1-datentypen.html#logicals"><span class="toc-section-number">3.1.3</span> Logicals</a></li>
<li><a href="3.1-datentypen.html#fehlende-werte"><span class="toc-section-number">3.1.4</span> Fehlende Werte</a></li>
<li><a href="3.1-datentypen.html#weitere-objekttypen"><span class="toc-section-number">3.1.5</span> Weitere Objekttypen</a></li>
<li><a href="3.1-datentypen.html#objekttypen-ändern"><span class="toc-section-number">3.1.6</span> Objekttypen ändern</a></li>
</ul></li>
<li><a href="3.2-datenstrukturen.html#datenstrukturen"><span class="toc-section-number">3.2</span> Datenstrukturen</a>
<ul>
<li><a href="3.2-datenstrukturen.html#vektor"><span class="toc-section-number">3.2.1</span> Vektor</a></li>
<li><a href="3.2-datenstrukturen.html#liste"><span class="toc-section-number">3.2.2</span> Liste</a></li>
<li><a href="3.2-datenstrukturen.html#matrix-und-dataframe"><span class="toc-section-number">3.2.3</span> Matrix und dataframe</a></li>
</ul></li>
<li><a href="3.3-zufallszahlen-erzeugen.html#zufallszahlen-erzeugen"><span class="toc-section-number">3.3</span> Zufallszahlen erzeugen</a></li>
<li><a href="3.4-rechnen-mit-vektoren.html#rechnen-mit-vektoren"><span class="toc-section-number">3.4</span> Rechnen mit Vektoren</a></li>
<li><a href="3.5-str-funktion.html#str-funktion"><span class="toc-section-number">3.5</span> str() Funktion</a></li>
<li><a href="3.6-selektion-von-spaltenzeilen-in-dataframes.html#selektion-von-spaltenzeilen-in-dataframes"><span class="toc-section-number">3.6</span> Selektion von Spalten/Zeilen in dataframes</a></li>
<li><a href="3.7-erstellen-von-eigenen-funktionen.html#erstellen-von-eigenen-funktionen"><span class="toc-section-number">3.7</span> Erstellen von eigenen Funktionen</a>
<ul>
<li><a href="3.7-erstellen-von-eigenen-funktionen.html#speziellere-anwendungen-von-funktionen"><span class="toc-section-number">3.7.1</span> Speziellere Anwendungen von Funktionen</a></li>
<li><a href="3.7-erstellen-von-eigenen-funktionen.html#nutze-...-als-platzhalter"><span class="toc-section-number">3.7.2</span> Nutze <code>...</code> als Platzhalter</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<div id="code-lesen-und-schreiben" class="section level2" number="2.3">
<h2><span class="header-section-number">2.3</span> Code lesen und schreiben</h2>
<p>Code chunks sind eine großartige Sache (grau hinterlegte Box) und beinhalten <em>Code</em>, <em>Kommentare</em> und das <em>Ergebnis</em>. Kommentare werden mit einer Raute (“#”) kenntlich gemacht und werden beim Ausführen des chunks nicht von R erkannt. Dies hat sehr große Vorteile! Der wichtigste ist, dass man seine Gedanken vor jeden Befehl schreibt, um noch nach Jahren (im besten Fall 😄) nachzuvollziehen was man eigentlich damit gemeint hat. Für Kollegen und einen selbst entsteht dadurch eine roadmap die zum Ziel führt.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="2.3-code-lesen-und-schreiben.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Definiere einen Vektor mit der Länge 1 bis 5 </span></span>
<span id="cb7-2"><a href="2.3-code-lesen-und-schreiben.html#cb7-2" aria-hidden="true" tabindex="-1"></a>vektor_a <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb7-3"><a href="2.3-code-lesen-und-schreiben.html#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Zeige mir vektor_a</span></span>
<span id="cb7-4"><a href="2.3-code-lesen-und-schreiben.html#cb7-4" aria-hidden="true" tabindex="-1"></a>vektor_a</span>
<span id="cb7-5"><a href="2.3-code-lesen-und-schreiben.html#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 1 2 3 4 5</span></span>
<span id="cb7-6"><a href="2.3-code-lesen-und-schreiben.html#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Wie lautet der Mittelwert von vektor_a?</span></span>
<span id="cb7-7"><a href="2.3-code-lesen-und-schreiben.html#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(vektor_a)</span>
<span id="cb7-8"><a href="2.3-code-lesen-und-schreiben.html#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 3</span></span></code></pre></div>
<p>Der Inhalt eines code chunks sollte ohne Probleme in die eigene R Konsole kopiert und ausgeführt werden können.</p>
<p>💡 Falls eine Fehlermeldung auftritt wurde ein vorausgehendes package oder eine Datenquelle vermutlich nicht geladen.</p>
<div id="die-konsole" class="section level3" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Die Konsole</h3>
<p>R code kann in jedem Texteditor oder Skriptfenster geschrieben werden. Um den Code auszuführen ist es jedoch wichtig ihn an die Kommandozeile (command-line; console) von R zu senden.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-22"></span>
<img src="images/013.png" alt="Die Konsole mit der Kommandozeile von R. Source: https://bookdown.org/ndphillips/YaRrr/" width="100%" />
<p class="caption">
Figure 2.9: Die Konsole mit der Kommandozeile von R. Source: <a href="https://bookdown.org/ndphillips/YaRrr/" class="uri">https://bookdown.org/ndphillips/YaRrr/</a>
</p>
</div>
<p>Die Kommandozeile in R startet mit dem <code>&gt;</code> Symbol, auch <em>prompt</em> genannt. Prompt leitet sich von prompting (auffordern) ab. Man wird also dazu aufgefordert einen Befehl einzutippen. <code>1+1</code> gibt also direkt <code>## [1] 2</code> wieder. Die <code>[1]</code> steht dabei für den Index (mehr dazu später).</p>
</div>
<div id="r-skript" class="section level3" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> R Skript</h3>
<p>Für einfache Befehle macht es Sinn direkt in die Konsole zu tippen. Code den man speichern möchte und komplexere Anfragen sollten jedoch in ein R script geschrieben haben (hat die Dateiendung <code>.R</code>). Ein R Skript ist eine Zusammenfassung an code welches in einer Datei zusammengefasst wurde.
Um ein neues Skript zu speichern schreibe:</p>
<p>File - New file - R script</p>
<p>Um code in einem Skript auszuwerten muss es explizit an die Konsole gesendet werden.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-23"></span>
<img src="images/014.png" alt="Code vom Skript an die Konsole senden. Source: https://bookdown.org/ndphillips/YaRrr/" width="100%" />
<p class="caption">
Figure 2.10: Code vom Skript an die Konsole senden. Source: <a href="https://bookdown.org/ndphillips/YaRrr/" class="uri">https://bookdown.org/ndphillips/YaRrr/</a>
</p>
</div>
<p>💡 Der shortcut strg+Enter wird euer bester Freund werden und ist meine bevorzugte Art.</p>
</div>
<div id="good-practice-code-zu-schreiben" class="section level3" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Good practice Code zu schreiben</h3>
<p>Einen klaren Gedanken auf das Papier zu bringen ist nicht so einfach. Beim Schreiben von Code verhält es sich natürlich ähnlich. Damit anderen Menschen ebenfalls Freude daran haben den Weg zum Ziel zu verstehen, sollte man es Ihnen so einfach wie möglich machen. Hier sind ein paar Regeln:</p>
<ul>
<li><strong>#</strong> = Kommentiere code so häufig wie möglich mit der Raute #. Mehr ist mehr!</li>
<li><strong>Leerzeichen</strong> = Findestduesbesserwennichsoschreibe oder wenn ich wieder normal schreibe?</li>
<li><strong>Zeilenumbrüche</strong> = Eine 100-seitige Abschlussarbeit in einem Absatz zu schreiben ist fürchterlich und würde keiner tun. Bei code verhält es sich ähnlich.</li>
</ul>
<p>💩 Beispiel</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="2.3-code-lesen-und-schreiben.html#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb8-2"><a href="2.3-code-lesen-und-schreiben.html#cb8-2" aria-hidden="true" tabindex="-1"></a>df<span class="ot">&lt;-</span><span class="fu">read.csv</span>(<span class="st">&quot;data/data_year.csv&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb8-3"><a href="2.3-code-lesen-und-schreiben.html#cb8-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">ggplot</span>(df, <span class="fu">aes</span>(wt,eh100b))<span class="sc">+</span><span class="fu">geom_point</span>()</span>
<span id="cb8-4"><a href="2.3-code-lesen-und-schreiben.html#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(df<span class="sc">$</span>wt, df<span class="sc">$</span>eh100a, <span class="at">use =</span> <span class="st">&quot;complete&quot;</span>, <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)</span></code></pre></div>
<p>💪 Beispiel</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="2.3-code-lesen-und-schreiben.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Lade das package tidyverse</span></span>
<span id="cb9-2"><a href="2.3-code-lesen-und-schreiben.html#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-3"><a href="2.3-code-lesen-und-schreiben.html#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Lese den Datensatz &quot;data&quot; vom Speicherkoog ein</span></span>
<span id="cb9-4"><a href="2.3-code-lesen-und-schreiben.html#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Das Trennzeichen ist Semikolon</span></span>
<span id="cb9-5"><a href="2.3-code-lesen-und-schreiben.html#cb9-5" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/data_year.csv&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;,&quot;</span>)</span>
<span id="cb9-6"><a href="2.3-code-lesen-und-schreiben.html#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Stelle den mittleren Grundwasserstand (wt; in cm) dar</span></span>
<span id="cb9-7"><a href="2.3-code-lesen-und-schreiben.html#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> df, <span class="fu">aes</span>(<span class="at">x =</span> wt)) <span class="sc">+</span> </span>
<span id="cb9-8"><a href="2.3-code-lesen-und-schreiben.html#cb9-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>()</span>
<span id="cb9-9"><a href="2.3-code-lesen-und-schreiben.html#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Berechne Pearson Korrelationskoeffizient zwischen Grundwasserstand und Redoxpotenzial in 100 cm Tiefe.</span></span>
<span id="cb9-10"><a href="2.3-code-lesen-und-schreiben.html#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Entferne vorher fehlende Werte</span></span>
<span id="cb9-11"><a href="2.3-code-lesen-und-schreiben.html#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(df<span class="sc">$</span>wt, df<span class="sc">$</span>eh100a, <span class="at">use =</span> <span class="st">&quot;complete&quot;</span>, <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)</span></code></pre></div>
</div>
</div>
<p style="text-align: center;">
<a href="2.2-rstudio-benutzeroberfläche.html"><button class="btn btn-default">Previous</button></a>
<a href="2.4-objekte-und-funktionen.html"><button class="btn btn-default">Next</button></a>
</p>
</div>
</div>


</div>

<script>

// add bootstrap table styles to pandoc tables
$(document).ready(function () {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
});

</script>

</body>
</html>
